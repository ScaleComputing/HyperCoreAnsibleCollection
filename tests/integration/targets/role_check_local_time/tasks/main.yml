---
- environment:
    SC_HOST: "{{ sc_host }}"
    SC_USERNAME: "{{ sc_username }}"
    SC_PASSWORD: "{{ sc_password }}"
    SC_TIMEOUT: "{{ sc_timeout }}"

  block:
    - name: Check if local time meets required time interval
      ansible.builtin.include_role:
        name: scale_computing.hypercore.check_local_time
      vars:
        time_zone: "{{ ansible_date_time.tz }}" # Europe/Ljubljana # time_zone.record.zone
        time_interval: 13:00-1:30 # Sometimes will pass, sometimes will not
      ignore_errors: true
      register: result

    - ansible.builtin.assert:
        that:
          - "'Local time is not in required time interval' in result.msg"
