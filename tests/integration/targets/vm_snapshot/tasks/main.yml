---
- environment:
    SC_HOST: "{{ sc_host }}"
    SC_USERNAME: "{{ sc_username }}"
    SC_PASSWORD: "{{ sc_password }}"
    SC_TIMEOUT: "{{ sc_timeout }}"

  vars:
    number_of_snapshot_testing_vms: 2
    non_unique_snapshot_label: not_unique
    # unique snapshot labels are strings like: snap-x, where x is an iterative number
    # -- snap-0 is the oldest snapshot, anything greater than 0, is a newer snapshot

  # +++++++++++++
  # TODO: a dedicated task that will setup on server exactly number of VMs (like 2),
  # with snapshots in exact state (like 3 manual/USER snapshots with unique label,
  # and 3 snapshots with non-unique label)
  # +++++++++++++
  block:
    - include_tasks: 01_vm_snapshot_info.yml
      vars:
        test_vms_number: "{{ number_of_snapshot_testing_vms }}"
  always:
    - include_tasks: helper_api_vm_snapshot_delete_all.yml
      vars:
        vms_number: "{{ number_of_snapshot_testing_vms }}"
