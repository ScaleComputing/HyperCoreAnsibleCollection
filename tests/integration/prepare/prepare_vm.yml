---
- name: Create VM for integration tests
  hosts: localhost
  connection: local
  tasks:
  - name: Create VM
    scale_computing.hypercore.vm:
      vm_name: vm-integration-test-source-vm
      description: Source VM
      state: present
      tags:
        - Xlab
      memory: "{{ '512 MB' | human_to_bytes }}"
      vcpu: 2
      attach_guest_tools_iso: false
      power_state: stop
      disks:
        - type: virtio_disk
          disk_slot: 0
          size: "{{ '10.1 GB' | human_to_bytes }}"
      nics:
        - vlan: 1
          type: RTL8139
      boot_devices:
        - type: virtio_disk
          disk_slot: 0
        - type: nic
          nic_vlan: 1
      machine_type: BIOS
